!function(){"use strict";const e=document.querySelector(".header__search-input"),t=document.querySelector(".header__search-span"),r=document.querySelector(".header__location"),n=document.querySelector(".weather__city-name"),a=(document.querySelector("weather__city-time"),document.querySelector(".weather__city-date")),o=document.querySelector(".weather__current-temperature"),c=document.querySelector(".weather__current-feels_temperature"),u=(document.querySelector("#currSunriseTime"),document.querySelector("#currSunsetTime"),document.querySelector(".weather__current-icon")),d=document.querySelector(".weather__current-weather"),i=document.querySelector("#currHumidity"),s=document.querySelector("#currWind"),l=document.querySelector("#currPressure"),y=document.querySelector("#currUv"),h=(document.querySelectorAll(".dynamic-data"),async e=>Math.round(10*e)/10%1==0?`${(Math.round(10*e)/10).toFixed(1)}°C`:Math.round(10*e)/10+"°C");const m=async(e,t)=>{alert(e),document.addEventListener("keydown",(e=>{"Escape"===e.code&&console.log("zaaazazaaza")}))},g=document.querySelector(".header__darkmode-check"),p=document.querySelector(".header__darkmode-text");function w(){const t=e.value.trim();(async(e,t)=>{try{await(async(e,t)=>{let r;r=e.lat&&e.lon?`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&appid=${t}&units=metric`:`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${t}&units=metric`;const m=await fetch(r);if(!m.ok)throw 404===m.status?new Error(`Sorry, we couldn't find ${e}. Please double-check the spelling and try again.`):new Error("Oops! We are having trouble with getting tha last weather information right now. Please try again later or contact support if the problem persists.");const g=await m.json(),{name:p,visibility:w,dt:S}=g,{speed:_}=g.wind,{temp:q,feels_like:k,humidity:C,pressure:x}=g.main,{icon:$,description:b}=g.weather[0],{sunrise:v,sunset:M}=g.sys;n.textContent=p,a.textContent=await(async(e,t)=>{const r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=new Date(1e3*e),a=n.getDate(),o=n.getMonth(),c=n.getDay();return n.getHours().toString().padStart(2,"0"),n.getMinutes().toString().padStart(2,"0"),`${a} ${["January","February","March","April","May","June","July","August","September","October","November","December"][o]} ${r[c]}`})(S),o.textContent=await h(q),c.textContent=await h(k),u.src=$,d.textContent=b,i.textContent=`${C} %`,s.textContent=await(async e=>`${Math.round(3.6*e)} km/h`)(_),l.textContent=`${x} hPa`,y.textContent=w})(e,"e732a92c66574d856b927e390c09674e")}catch(e){"Failed to fetch"===e.message?await m("Oh! It looks like you're not connected to the internet. Please check your connection and try again."):await m(e.message)}})(t),console.log(t)}g.addEventListener("change",(()=>{document.body.classList.toggle("dark"),document.body.classList.contains("dark")?p.textContent="Dark Mode":p.textContent="Light Mode"})),t.addEventListener("click",w),e.addEventListener("keyup",(e=>{"Enter"==e.key&&w()})),r.addEventListener("click",(async()=>{navigator.geolocation.getCurrentPosition((async e=>{const t={lat:e.coords.latitude,lon:e.coords.longitude};console.log(t)}),(e=>{console.log(e)}))}))}();