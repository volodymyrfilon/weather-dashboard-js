!function(){"use strict";var e={d:function(t,r){for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Z:function(){return A}});const t=document.querySelectorAll(".dynamic-data"),r="e732a92c66574d856b927e390c09674e",a=document.querySelector(".header__search-input"),n=document.querySelector(".header__search-span"),o=document.querySelector(".header__location"),c=document.querySelector(".weather__city"),s=c.querySelector(".weather__city-name"),i=c.querySelector(".weather__city-time"),d=c.querySelector(".weather__city-date"),l=document.querySelector(".weather__current"),u=l.querySelector(".weather__current-temperature"),h=l.querySelector(".weather__current-feels_temperature"),w=l.querySelector("#currSunriseTime"),y=l.querySelector("#currSunsetTime"),m=l.querySelector(".weather__current-icon"),p=l.querySelector(".weather__current-weather"),_=l.querySelector("#currHumidity"),g=l.querySelector("#currWind"),S=l.querySelector("#currPressure"),q=l.querySelector("#currVisibility"),f=document.querySelector(".weather__days"),$=document.querySelector(".weather__hours"),v={"01d":"d-clear-sky","01n":"n-clear-sky","02d":"d-few-clouds","02n":"n-few-clouds","03d":"d-scattered-clouds","03n":"n-scattered-clouds","04d":"a-clouds","04n":"a-clouds","09d":"n-shower-rainl","09n":"n-shower-rain","10d":"a-rain","10n":"a-rain","11d":"d-thunderstorm","11n":"n-thunderstorm","13d":"d-snow","13n":"n-snow","50d":"a-haze","50n":"a-haze"},k=async(e,t)=>{const r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=new Date(1e3*e),n=a.getDate(),o=a.getMonth(),c=a.getDay(),s=a.getHours().toString().padStart(2,"0"),i=a.getMinutes().toString().padStart(2,"0"),d=new Date,l=d.getHours().toString().padStart(2,"0"),u=d.getMinutes().toString().padStart(2,"0"),h=`${n} ${["January","February","March","April","May","June","July","August","September","October","November","December"][o]} ${r[c]}`,w=`${r[c]}, ${n} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o]}`;switch(t){case"day":return r[c];case"hour":return`${s}:${i}`;case"short":return w;case"currentTime":return`${l}:${u}`;default:return h}},b=async e=>`${Math.round(3.6*e)} km/h`,C=async e=>(e=>e<10&&e>0?`0${e}°C`:`${e}°C`)(Math.round(e));var L=async()=>{navigator.geolocation.getCurrentPosition((async e=>{const t={lat:e.coords.latitude,lon:e.coords.longitude};console.log(t),await A(t,r)}),(e=>{console.log(e),A("Kyiv",r)}))};const x=async(e,t)=>{alert(e),document.addEventListener("keydown",(e=>{"Escape"===e.code&&console.log("zaaazazaaza")}))};function E(){const e=a.value.trim();M(e,r),console.log(e)}setInterval((async()=>{const e=await k(null,"currentTime");i.textContent=e}),1e3),o.addEventListener("click",L),L(),(async()=>{const e=f.querySelector(".weather__days-wrapper");for(let t=0;t<5;t++){const t=document.createElement("div");t.classList.add("weather__days-item");const r=document.createElement("img");r.classList.add("weather__days-icon"),r.setAttribute("alt","icon");const a=document.createElement("div");a.classList.add("weather__days-temperature");const n=document.createElement("div");n.classList.add("weather__days-date"),t.append(r,a,n),e.appendChild(t)}})(),(async()=>{const e=$.querySelector(".weather__hours-wrapper");for(let t=0;t<6;t++){const t=document.createElement("div");t.classList.add("weather__hours-item");const r=document.createElement("div");r.classList.add("weather__hours-time");const a=document.createElement("img");a.classList.add("weather__hours-icon_weather"),a.setAttribute("alt","icon-weather");const n=document.createElement("div");n.classList.add("weather__hours-temperature");const o=document.createElement("img");o.classList.add("weather__hours-icon_wind"),o.setAttribute("alt","icon-wind");const c=document.createElement("div");c.classList.add("weather__hours-wind"),t.append(r,a,n,o,c),e.appendChild(t)}})();const M=async(e,r)=>{try{await(async()=>{a.blur();for(let e=0;e<t.length;e++)t[e].classList.add("loading")})(),await(async(e,t)=>{let r;r=e.lat&&e.lon?`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&appid=${t}&units=metric`:`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${t}&units=metric`;const a=await fetch(r);if(!a.ok)throw 404===a.status?new Error(`Sorry, we couldn't find ${e}. Please double-check the spelling and try again.`):new Error("Oops! We are having trouble with getting tha last weather information right now. Please try again later or contact support if the problem persists.");const n=await a.json(),{name:o,visibility:c,dt:i}=n,{speed:l}=n.wind,{temp:f,feels_like:$,humidity:L,pressure:x}=n.main,{icon:E,description:M}=n.weather[0],{sunrise:A,sunset:D}=n.sys;s.textContent=o,d.textContent=await k(i,"short"),u.textContent=await C(f),h.textContent=await C($),w.textContent=`${await k(A,"hour")} AM`,y.textContent=`${await k(D,"hour")} PM`,m.src=`icons/weather/weather/${v[E]}.png`,p.textContent=M,_.textContent=`${L} %`,g.textContent=await b(l),S.textContent=`${x} hPa`,q.textContent=await(async e=>e/1e3+" km")(c)})(e,r),await(async(e,t)=>{const r=f.querySelectorAll(".weather__days-icon"),a=f.querySelectorAll(".weather__days-temperature"),n=f.querySelectorAll(".weather__days-date"),o=document.querySelectorAll(".weather__hours-item"),c=$.querySelectorAll(".weather__hours-time"),s=$.querySelectorAll(".weather__hours-icon_weather"),i=$.querySelectorAll(".weather__hours-temperature"),d=$.querySelectorAll(".weather__hours-icon_wind"),l=$.querySelectorAll(".weather__hours-wind");let u;u=e.lat&&e.lon?`https://api.openweathermap.org/data/2.5/forecast?lat=${e.lat}&lon=${e.lon}&appid=${t}&units=metric`:`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=${t}&units=metric`;const h=await fetch(u);if(!h.ok)throw 404===h.status?new Error(`Sorry, we couldn't find ${e}. Please double-check the spelling and try again.`):new Error("Oops! We're having trouble getting the latest weather information right now. Please try again later or contact support if the problem persists.");const w=await h.json(),y=(e=>{let t=[];for(let r=0;r<40;r++)e.list[r].dt_txt.match("12:00:00")&&t.push(w.list[r]);return t})(w);for(let e=0;e<5;e++)r[e].src=`icons/weather/weather/${v[y[e].weather[0].icon]}.png`,a[e].textContent=await C(y[e].main.temp),n[e].textContent=await k(y[e].dt,"short");const m=(e,t)=>{["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"].includes(t)||(e.style.background="linear-gradient(174deg, #443D64 -15.92%, rgba(101, 130, 198, 0.00) 192.45%)")};for(let e=0;e<6;e++)c[e].textContent=await k(w.list[e].dt,"hour"),s[e].src=`/icons/weather/weather/${v[w.list[e].weather[0].icon]}.png`,i[e].textContent=await C(w.list[e].main.temp),d[e].src="/icons/weather/wind-vector.svg",p=d[e],_=w.list[e].wind.deg,p.style.transform=`rotate(${_-45}deg)`,l[e].textContent=await b(w.list[e].wind.speed),m(o[e],c[e].textContent);var p,_})(e,r),await(async()=>{for(let e=0;e<t.length;e++)t[e].classList.remove("loading")})()}catch(e){"Failed to fetch"===e.message?await x("Oh! It looks like you're not connected to the internet. Please check your connection and try again."):await x(e.message)}};var A=M;n.addEventListener("click",E),a.addEventListener("keyup",(e=>{"Enter"==e.key&&E()}));const D=document.querySelector(".header__darkmode-check"),P=document.querySelector(".header__darkmode-text");document.addEventListener("DOMContentLoaded",(()=>{const e="true"===localStorage.getItem("isDarkMode");document.body.classList.toggle("dark",e),P.textContent=e?"Dark Mode":"Light Mode",D.checked=e})),D.addEventListener("change",(()=>{const e=document.body.classList.toggle("dark");P.textContent=e?"Dark Mode":"Light Mode",localStorage.setItem("isDarkMode",e.toString())}))}();